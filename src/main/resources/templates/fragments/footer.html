<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
</head>
<body>
<div th:fragment="footer">

    <script>
        var openweathermap = $("#openweathermap-widget");
        $.getJSON("/weather")
            .done(
                function (response) {
                    console.log(response)
                    openweathermap.find(".weather-right-card__temperature-min").text((response.main.temp_min) + '°C')
                    openweathermap.find(".weather-right-card__temperature-max").text((response.main.temp_max) + '°C')
                    openweathermap.find(".widget-right__description").text((response.weather[0].description))
                    $("#weather-image").attr('src', '//openweathermap.org/themes/openweathermap/assets/vendor/owm/img/widgets/' + response.weather[0].icon + '.png')
                    openweathermap.find(".widget-right__title").text((response.name) + ', ' + response.sys.country)
                }
            )
            .fail(function (response) {
                console.log(response.responseText)
                    $("#weather-image").attr('src', 'https://us.123rf.com/450wm/martialred/martialred1507/martialred150700957/42621684-ungl%C3%BCcklich-oder-traurig-smiley-symbol-f%C3%BCr-apps-und-websites.jpg?ver=6')
                    openweathermap.find(".widget-right__description").text((response.responseText))
                }
            )

        $.get("/cartElements")
            .done(function (data) {
                console.log(data)
                var parsed = JSON.parse(data);
                var orderLines = parsed.orderLines;
                console.log(orderLines)
                var items = "";
                for (o in orderLines) {
                    var orderLine = orderLines[o];
                    items += items.concat("<li>" + orderLine.product.title + "</li>")
                }


                $('#toReplace').html(items)
            })



    </script>
</div>
</body>
</html>